# YouTube Analytics Dashboard

> YouTube íŠ¸ë Œë”© ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ê³  AI ê¸°ë°˜ ë¶„ì„ì„ ì œê³µí•˜ëŠ” ë°ì´í„° íŒŒì´í”„ë¼ì¸

---

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          YouTube Analytics Pipeline                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   GitHub    â”‚â”€â”€â”€â”€â–¶â”‚ Cloud Build â”‚â”€â”€â”€â”€â–¶â”‚   GCR       â”‚â”€â”€â”€â”€â–¶â”‚  Cloud Run  â”‚   â”‚
â”‚   â”‚   (Push)    â”‚     â”‚  (íŠ¸ë¦¬ê±°)    â”‚     â”‚  (ì´ë¯¸ì§€)   â”‚     â”‚    Job      â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚   â”‚                                                                              â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   â”‚                    Cloud Scheduler (ìŠ¤ì¼€ì¤„ëŸ¬)                        â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚   â”‚   â”‚  videos     â”‚  comments   â”‚ categories  â”‚  channels   â”‚             â”‚   â”‚
â”‚   â”‚   â”‚  (ë§¤ì‹œê°„)    â”‚  (ë§¤ì‹œê°„)    â”‚  (ì£¼1íšŒ)     â”‚  (ì¼1íšŒ)     â”‚             â”‚   â”‚
â”‚   â”‚   â”‚  0 * * * *  â”‚  5 * * * *  â”‚  0 0 * * 0  â”‚  0 1 * * *  â”‚             â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚   â”‚          â”‚             â”‚             â”‚             â”‚                     â”‚   â”‚
â”‚   â”‚          â–¼             â–¼             â–¼             â–¼                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚   â”‚   â”‚                     YouTube Data API v3                          â”‚   â”‚   â”‚
â”‚   â”‚   â”‚  videos.list â”‚ commentThreads.list â”‚ videoCategories â”‚ channels  â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚   â”‚                                    â”‚                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         GCS Bucket (Raw ë ˆì´ì–´)                          â”‚   â”‚
â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   gs://plosind-youtube-raw-data/                                        â”‚   â”‚
â”‚   â”‚   â””â”€â”€ raw/youtube/                                                       â”‚   â”‚
â”‚   â”‚       â”œâ”€â”€ videos_list/region=KR/date=YYYY-MM-DD/hour=HH/                â”‚   â”‚
â”‚   â”‚       â”œâ”€â”€ comment_threads/region=KR/date=YYYY-MM-DD/hour=HH/video_id=/  â”‚   â”‚
â”‚   â”‚       â”œâ”€â”€ video_categories/region=KR/date=YYYY-MM-DD/                   â”‚   â”‚
â”‚   â”‚       â””â”€â”€ channels/date=YYYY-MM-DD/                                     â”‚   â”‚
â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â”‚                                         â”‚
â”‚                                        â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                      Transform ë ˆì´ì–´ (Python/DBT)                       â”‚   â”‚
â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   Raw JSON â”€â”€â–¶ Clean í…Œì´ë¸” â”€â”€â–¶ Mart ë·°                                 â”‚   â”‚
â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                        â”‚                                         â”‚
â”‚                                        â–¼                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         Supabase (PostgreSQL)                            â”‚   â”‚
â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚   â”‚   â”‚   Clean     â”‚    â”‚    Mart     â”‚    â”‚    Role     â”‚                 â”‚   â”‚
â”‚   â”‚   â”‚   í…Œì´ë¸”     â”‚â”€â”€â”€â–¶â”‚     ë·°      â”‚â”€â”€â”€â–¶â”‚  (AI ì „ìš©)   â”‚                 â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚   â”‚                                                â”‚                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                    â”‚                             â”‚
â”‚                                                    â–¼                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                          ì• í”Œë¦¬ì¼€ì´ì…˜ ë ˆì´ì–´                              â”‚   â”‚
â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
â”‚   â”‚   â”‚   Ollama    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  Streamlit  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   ì‚¬ìš©ì     â”‚       â”‚   â”‚
â”‚   â”‚   â”‚  (LLM AI)   â”‚         â”‚ (ëŒ€ì‹œë³´ë“œ)   â”‚         â”‚  (ë¸Œë¼ìš°ì €)  â”‚       â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚
â”‚   â”‚                                                                          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ê¸°ìˆ  ìŠ¤íƒ

| ë ˆì´ì–´ | ê¸°ìˆ  | ì„¤ëª… |
|--------|------|------|
| **ìŠ¤ì¼€ì¤„ë§** | Cloud Scheduler | Cron ê¸°ë°˜ ì‘ì—… ìŠ¤ì¼€ì¤„ë§ |
| **ì»´í“¨íŒ…** | Cloud Run Job | ì„œë²„ë¦¬ìŠ¤ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ |
| **ìŠ¤í† ë¦¬ì§€** | Google Cloud Storage | Raw ë°ì´í„° ì €ì¥ì†Œ |
| **ë°ì´í„°ë² ì´ìŠ¤** | Supabase (PostgreSQL) | Clean/Mart í…Œì´ë¸” ì €ì¥ |
| **ë³€í™˜** | Python / DBT | ë°ì´í„° ì •ì œ ë° ì§‘ê³„ |
| **AI** | Ollama | ë¡œì»¬ LLM ê¸°ë°˜ ë¶„ì„ |
| **Frontend** | Next.js + TypeScript | ëŒ€ì‹œë³´ë“œ UI |
| **Backend** | FastAPI (Python) | API ì„œë²„ + AI ì—°ë™ |
| **CI/CD** | Cloud Build + GitHub | ìë™ ë¹Œë“œ ë° ë°°í¬ |

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
DE_pro/
â”œâ”€â”€ youtube_collector/          # ë°ì´í„° ìˆ˜ì§‘ê¸°
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ clients/           # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”‚   â””â”€â”€ youtube.py     # YouTube API í˜¸ì¶œ
â”‚   â”‚   â”œâ”€â”€ collectors/        # ìˆ˜ì§‘ê¸° í´ë˜ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py        # ë² ì´ìŠ¤ í´ë˜ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ videos.py      # íŠ¸ë Œë”© ì˜ìƒ ìˆ˜ì§‘
â”‚   â”‚   â”‚   â”œâ”€â”€ comments.py    # ëŒ“ê¸€ ìˆ˜ì§‘
â”‚   â”‚   â”‚   â”œâ”€â”€ categories.py  # ì¹´í…Œê³ ë¦¬ ìˆ˜ì§‘
â”‚   â”‚   â”‚   â””â”€â”€ channels.py    # ì±„ë„ ì •ë³´ ìˆ˜ì§‘
â”‚   â”‚   â”œâ”€â”€ storage/           # ìŠ¤í† ë¦¬ì§€ í´ë˜ìŠ¤
â”‚   â”‚   â”‚   â””â”€â”€ gcs.py         # GCS ì—…ë¡œë“œ
â”‚   â”‚   â”œâ”€â”€ config.py          # í™˜ê²½ë³€ìˆ˜ ì„¤ì •
â”‚   â”‚   â””â”€â”€ main.py            # CLI ì§„ì…ì 
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ cloudbuild.yaml
â”œâ”€â”€ .env                        # í™˜ê²½ë³€ìˆ˜ (Git ì œì™¸)
â””â”€â”€ README.md
```

---

## ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ë°ì´í„° ìˆ˜ì§‘ ì‘ì—…                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Job 1: videos        Job 2: comments      Job 3: categories            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚ íŠ¸ë Œë”© 50ê°œ   â”‚     â”‚ ìƒìœ„ 5ê°œ ì˜ìƒ â”‚     â”‚ ì¹´í…Œê³ ë¦¬ ë§¤í•‘ â”‚            â”‚
â”‚   â”‚ ì˜ìƒ/ì‹œê°„ë‹¹   â”‚     â”‚ ëŒ“ê¸€ 100ê°œ   â”‚     â”‚ ì£¼ê°„ ë™ê¸°í™”   â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚          â”‚                    â”‚                    â”‚                     â”‚
â”‚          â–¼                    â–¼                    â–¼                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                    GCS: Raw ë ˆì´ì–´ (JSON.gz)                     â”‚   â”‚
â”‚   â”‚                                                                  â”‚   â”‚
â”‚   â”‚  â€¢ Hive ìŠ¤íƒ€ì¼ íŒŒí‹°ì…”ë‹ (region/date/hour)                       â”‚   â”‚
â”‚   â”‚  â€¢ ë¶ˆë³€, ì¶”ê°€ ì „ìš© (append-only)                                 â”‚   â”‚
â”‚   â”‚  â€¢ ë©”íƒ€ë°ì´í„° í¬í•¨ (_metadata.json)                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               ë³€í™˜ ë‹¨ê³„                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚   Raw (GCS)              Clean (Supabase)         Mart (Supabase)       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚ JSON.gz  â”‚ â”€â”€â”€â”€â”€â”€â–¶  â”‚ videos       â”‚ â”€â”€â”€â”€â”€â–¶ â”‚ trending_    â”‚        â”‚
â”‚   â”‚ íŒŒì¼     â”‚          â”‚ comments     â”‚        â”‚ analysis     â”‚        â”‚
â”‚   â”‚          â”‚          â”‚ categories   â”‚        â”‚ channel_statsâ”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                          â”‚
â”‚   â€¢ ì—­ì •ê·œí™”              â€¢ ì¤‘ë³µ ì œê±°             â€¢ ì§‘ê³„ ë°ì´í„°           â”‚
â”‚   â€¢ ìŠ¤í‚¤ë§ˆ ê²€ì¦           â€¢ íƒ€ì… ë³€í™˜             â€¢ ë©”íŠ¸ë¦­ ê³„ì‚°           â”‚
â”‚                          â€¢ PK ì œì•½ì¡°ê±´           â€¢ AIìš© ë·°               â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Raw ë°ì´í„° ë³´ê´€ ì •ì±…

| ë°ì´í„° ìœ í˜• | ë³´ê´€ ê¸°ê°„ | ì´ìœ  |
|-------------|-----------|------|
| `videos_list` | 90ì¼ | íŠ¸ë Œë“œ ì¶”ì„¸/ê³„ì ˆì„± ë¶„ì„ìš© |
| `comment_threads` | 14ì¼ | ìš©ëŸ‰ì´ í¼, Cleanì—ì„œ ìš”ì•½ë§Œ ì €ì¥ |
| `video_categories` | 365ì¼ | ê±°ì˜ ë³€ê²½ ì—†ìŒ, ë³´ê´€ ë¶€ë‹´ ì—†ìŒ |
| `channels` | 180ì¼ | ì±„ë„ ì„±ì¥ ë¶„ì„ìš© |

---

## ì‚¬ìš©ë²•

### ë¡œì»¬ ê°œë°œ

```bash
# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp .env.example .env

# ì˜ì¡´ì„± ì„¤ì¹˜
cd youtube_collector
pip install -r requirements.txt

# ìˆ˜ì§‘ ì‹¤í–‰
python -m src.main --job=videos      # íŠ¸ë Œë”© ì˜ìƒ
python -m src.main --job=comments    # ëŒ“ê¸€
python -m src.main --job=categories  # ì¹´í…Œê³ ë¦¬
python -m src.main --job=channels    # ì±„ë„ ì •ë³´
```

### Docker

```bash
# ì´ë¯¸ì§€ ë¹Œë“œ
docker build -t youtube-collector ./youtube_collector

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰
docker run --env-file .env youtube-collector --job=videos
```

### Cloud Run Job ë°°í¬

```bash
# Job ìƒì„±
gcloud run jobs create youtube-videos \
  --image gcr.io/deproject-482905/youtube-collector \
  --args="--job=videos" \
  --region=asia-northeast3

# ìŠ¤ì¼€ì¤„ëŸ¬ ì—°ê²°
gcloud scheduler jobs create http youtube-videos-scheduler \
  --schedule="0 * * * *" \
  --uri="https://asia-northeast3-run.googleapis.com/..." \
  --http-method=POST
```

---

## í™˜ê²½ë³€ìˆ˜

```env
# YouTube API
YOUTUBE_API_KEY=your_api_key

# GCP ì„¤ì •
GCP_PROJECT_ID=
GCS_BUCKET_NAME=

# ìˆ˜ì§‘ ì„¤ì •
YOUTUBE_REGION_CODE=KR                          # ìˆ˜ì§‘ ëŒ€ìƒ ì§€ì—­
YOUTUBE_MAX_RESULTS=50                          # íŠ¸ë Œë”© ì˜ìƒ ìˆ˜
YOUTUBE_COMMENT_TARGET_VIDEOS_PER_SNAPSHOT=5    # ëŒ“ê¸€ ìˆ˜ì§‘ ëŒ€ìƒ ì˜ìƒ ìˆ˜
YOUTUBE_COMMENT_MAX_PAGES_PER_VIDEO=2           # ì˜ìƒë‹¹ ëŒ“ê¸€ í˜ì´ì§€ ìˆ˜
```

---

## ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Web Application Layer                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                        Frontend (Next.js)                            â”‚    â”‚
â”‚   â”‚                                                                      â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚    â”‚
â”‚   â”‚   â”‚  Dashboard  â”‚   â”‚   AI Chat   â”‚   â”‚  Analytics  â”‚              â”‚    â”‚
â”‚   â”‚   â”‚   (ì°¨íŠ¸)     â”‚   â”‚   (ì±„íŒ…)    â”‚   â”‚  (ë¦¬í¬íŠ¸)   â”‚              â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â”‚    â”‚
â”‚   â”‚          â”‚                 â”‚                 â”‚                      â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”              â”‚    â”‚
â”‚   â”‚   â”‚              shadcn/ui + Tailwind CSS            â”‚              â”‚    â”‚
â”‚   â”‚   â”‚                  Recharts (ì°¨íŠ¸)                  â”‚              â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚    â”‚
â”‚   â”‚                             â”‚                                        â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                 â”‚ REST API                                    â”‚
â”‚                                 â–¼                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚                        Backend (FastAPI)                             â”‚    â”‚
â”‚   â”‚                                                                      â”‚    â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚    â”‚
â”‚   â”‚   â”‚  Data API   â”‚   â”‚  AI Service â”‚   â”‚  Insights   â”‚              â”‚    â”‚
â”‚   â”‚   â”‚  (CRUD)     â”‚   â”‚  (Ollama)   â”‚   â”‚  Generator  â”‚              â”‚    â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â”‚    â”‚
â”‚   â”‚          â”‚                 â”‚                 â”‚                      â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚              â”‚                 â”‚                 â”‚                           â”‚
â”‚              â–¼                 â–¼                 â”‚                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                           â”‚
â”‚   â”‚    Supabase     â”‚   â”‚   Ollama    â”‚         â”‚                           â”‚
â”‚   â”‚   (PostgreSQL)  â”‚   â”‚ (Local LLM) â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚   â”‚                 â”‚   â”‚             â”‚                                      â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  llama3.2   â”‚                                      â”‚
â”‚   â”‚  â”‚ AI Views  â”‚  â”‚   â”‚  gemma2     â”‚                                      â”‚
â”‚   â”‚  â”‚ (7ê°œ)     â”‚  â”‚   â”‚  etc...     â”‚                                      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---

## AI ì±—ë´‡ ì•„í‚¤í…ì²˜

```mermaid
flowchart TB
    subgraph Input
        A[ğŸ™‹ User Question]
    end

    subgraph Step0["Step 0: Query Router"]
        B{ì§ˆë¬¸ ë¶„ë¥˜}
        B -->|DATA| C[ë°ì´í„° ë¶„ì„ ê²½ë¡œ]
        B -->|KNOWLEDGE| D[RAG ê²€ìƒ‰ ê²½ë¡œ]
    end

    subgraph Step1["Step 1: LLM Analysis"]
        E[í†µí•© ë¶„ì„<br/>Intent + Entity + View ì„ íƒ]
        F[(Supabase<br/>ìŠ¤í‚¤ë§ˆ ì¡°íšŒ)]
        E <-.->|Self-Healing| F
    end

    subgraph Step3["Step 3: Data Retrieval"]
        G[Parallel View Query<br/>ìµœëŒ€ 3ê°œ ë™ì‹œ ì¡°íšŒ]
        H[RAG ë²¡í„° ê²€ìƒ‰<br/>Knowledge Base]
    end

    subgraph Step4["Step 4: Analysis"]
        I[Python í†µê³„ ë¶„ì„<br/>ìƒê´€ê³„ìˆ˜ Â· Z-Score ì´ìƒì¹˜]
    end

    subgraph Output
        J[ğŸ“Š Final AI Response<br/>+ ì‹œê°í™” + í›„ì† ì§ˆë¬¸]
    end

    A --> B
    C --> E
    D --> H
    E --> G
    G --> I
    H --> I
    I --> J

    style A fill:#ef4444,color:#fff
    style J fill:#10b981,color:#fff
    style B fill:#f59e0b,color:#000
```


### AI ë¶„ì„ íŒŒì´í”„ë¼ì¸ ì„¤ëª…

| ë‹¨ê³„ | êµ¬í˜„ ë‚´ìš© |
|------|----------|
| **Query Router** | ì§ˆë¬¸ ìœ í˜•(ë°ì´í„° ë¶„ì„ vs ì¼ë°˜ ì§€ì‹)ì— ë”°ë¼ ì²˜ë¦¬ ê²½ë¡œ ë¶„ê¸° |
| **LLM Analysis** | ë‹¨ì¼ LLM í˜¸ì¶œë¡œ í•„ìš”í•œ View ì„ íƒ (DB ìŠ¤í‚¤ë§ˆë¥¼ í”„ë¡¬í”„íŠ¸ì— í¬í•¨) |
| **Parallel Query** | ì„ íƒëœ View ìµœëŒ€ 3ê°œë¥¼ `asyncio.gather()`ë¡œ ë™ì‹œ ì¡°íšŒ |
| **í†µê³„ ë¶„ì„** | Pandasë¡œ í”¼ì–´ìŠ¨ ìƒê´€ê³„ìˆ˜ ê³„ì‚°, Z-Score ê¸°ë°˜ ì´ìƒì¹˜ íƒì§€ ìˆ˜í–‰ |
| **ì‘ë‹µ ìƒì„±** | ë¶„ì„ ê²°ê³¼ë¥¼ ìì—°ì–´ë¡œ ë³€í™˜, í›„ì† ì§ˆë¬¸ ì œì•ˆ |

### ì›¹ ê¸°ìˆ  ìŠ¤íƒ

| ë ˆì´ì–´ | ê¸°ìˆ  | ì„¤ëª… |
|--------|------|------|
| **Frontend** | Next.js 14 + TypeScript | App Router, SSR ì§€ì› |
| **UI ì»´í¬ë„ŒíŠ¸** | shadcn/ui + Tailwind CSS | ëª¨ë˜í•œ UI, ë¹ ë¥¸ ê°œë°œ |
| **ì°¨íŠ¸** | Recharts | React ì¹œí™”ì  ë°ì´í„° ì‹œê°í™” |
| **Backend** | FastAPI (Python) | ë¹„ë™ê¸° API, Ollama ì—°ë™ |
| **AI** | Ollama | ë¡œì»¬ LLM (llama3.2, gemma2 ë“±) |
| **Database** | Supabase | PostgreSQL + AI ì „ìš© View |

### í”„ë¡ íŠ¸ì—”ë“œ í˜ì´ì§€ êµ¬ì„±

| í˜ì´ì§€ | ê²½ë¡œ | ì„¤ëª… |
|--------|------|------|
| Overview | `/` | KPI ì¹´ë“œ, TOP 10, ì¹´í…Œê³ ë¦¬ ë¶„í¬ |
| Trending | `/trending` | TOP 50 ì „ì²´ ë¦¬ìŠ¤íŠ¸, í•„í„°/ì •ë ¬ |
| Channels | `/channels` | ì±„ë„ ë¶„ì„, ê·œëª¨ë³„ ë¶„í¬ |
| Categories | `/categories` | ì¹´í…Œê³ ë¦¬ë³„ ìƒì„¸ ë¶„ì„ |
| AI Chat | `/chat` | ìì—°ì–´ ì§ˆì˜ ì±—ë´‡ |

### AI ì „ìš© View (Supabase)

| View | ìš©ë„ |
|------|------|
| `ai_current_trending` | í˜„ì¬ íŠ¸ë Œë”© TOP 50 |
| `ai_category_stats` | ì¹´í…Œê³ ë¦¬ë³„ í†µê³„ |
| `ai_channel_stats` | ì±„ë„ë³„ íŠ¸ë Œë”© í†µê³„ |
| `ai_top_growing` | ê¸‰ì„±ì¥ ë¹„ë””ì˜¤ |
| `ai_video_history` | ë¹„ë””ì˜¤ ìˆœìœ„/ì¡°íšŒìˆ˜ ì´ë ¥ |
| `ai_popular_comments` | ì¸ê¸° ëŒ“ê¸€ |
| `ai_daily_summary` | ì¼ë³„ ìš”ì•½ í†µê³„ |

### ì›¹ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
web/
â”œâ”€â”€ frontend/                    # Next.js ì•±
â”‚   â”œâ”€â”€ app/                     # App Router
â”‚   â”‚   â”œâ”€â”€ page.tsx             # Overview í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ trending/
â”‚   â”‚   â”œâ”€â”€ channels/
â”‚   â”‚   â”œâ”€â”€ categories/
â”‚   â”‚   â””â”€â”€ chat/
â”‚   â”œâ”€â”€ components/              # UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ ui/                  # shadcn/ui
â”‚   â”‚   â”œâ”€â”€ charts/              # ì°¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ chat/                # ì±—ë´‡ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ lib/                     # ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ backend/                     # FastAPI ì•±
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ main.py              # ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
    â”‚   â”œâ”€â”€ routers/             # API ë¼ìš°í„°
    â”‚   â”‚   â”œâ”€â”€ trending.py
    â”‚   â”‚   â”œâ”€â”€ channels.py
    â”‚   â”‚   â””â”€â”€ chat.py
    â”‚   â”œâ”€â”€ services/            # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    â”‚   â”‚   â”œâ”€â”€ supabase.py
    â”‚   â”‚   â””â”€â”€ ollama.py
    â”‚   â””â”€â”€ models/              # Pydantic ëª¨ë¸
    â”œâ”€â”€ requirements.txt
    â””â”€â”€ .env
```

---

## ë°ì´í„° í’ˆì§ˆ ê´€ë¦¬ (Data Quality)

### ì¤‘ë³µ ì²˜ë¦¬ ë°©ì§€

```sql
-- processed_files í…Œì´ë¸”ë¡œ íŒŒì¼ë³„ ì²˜ë¦¬ ìƒíƒœ ì¶”ì 
SELECT file_path, status, records_count, processed_at
FROM processed_files
WHERE status = 'success';

-- fact_comments: ë³µí•©í‚¤ë¡œ ë™ì¼ ëŒ“ê¸€ì˜ ì‹œì ë³„ íŠ¸ë Œë“œ ì¶”ì 
PRIMARY KEY (comment_id, collected_at)
```

### ì—ëŸ¬ í•¸ë“¤ë§ ë° ì¬ì²˜ë¦¬

| ìƒí™© | ì²˜ë¦¬ ë°©ì‹ |
|------|----------|
| API ì‹¤íŒ¨ | ìµœëŒ€ 3íšŒ ì¬ì‹œë„ í›„ `status='error'` ê¸°ë¡ |
| ì¤‘ë³µ íŒŒì¼ | `processed_files` ì¡°íšŒë¡œ ìŠ¤í‚µ ì—¬ë¶€ ê²°ì • |
| ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜ | Cloud Function ë¡œê·¸ ê¸°ë¡, ìˆ˜ë™ í™•ì¸ |
| ì¬ì²˜ë¦¬ í•„ìš” ì‹œ | `trigger_missing.py`ë¡œ ëˆ„ë½ íŒŒì¼ ìë™ íƒì§€ ë° ì¬ì‹¤í–‰ |

---

## ì„¤ê³„ ì˜ë„ (Why This Architecture?)

> **"í˜„ì¬ íŠ¸ë˜í”½ì€ ì‘ì§€ë§Œ, í”„ë¡œë•ì…˜ê¸‰ ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì„¤ê³„ ì—­ëŸ‰ì„ ì¦ëª…í•˜ê¸° ìœ„í•´ í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤."**

| ì„ íƒ | ì´ìœ  |
|------|------|
| Cloud Run Job | ì„œë²„ë¦¬ìŠ¤ë¡œ ë¹„ìš© ìµœì í™”, ë§¤ì‹œê°„ ì‹¤í–‰ìœ¼ë¡œ ìœ íœ´ ë¹„ìš© 0ì› |
| GCS Raw ë ˆì´ì–´ | ë¶ˆë³€ ì €ì¥ì†Œë¡œ ë°ì´í„° ë¦¬ë‹ˆì§€ ì¶”ì , ì¬ì²˜ë¦¬ ê°€ëŠ¥ |
| Supabase | ë¬´ë£Œ Tierë¡œ PostgreSQL + API ìë™ ìƒì„±, AI View ì§€ì› |
| Event-driven Transform | GCS ì—…ë¡œë“œ ì´ë²¤íŠ¸ë¡œ Cloud Function ìë™ íŠ¸ë¦¬ê±°, ë°°ì¹˜ ì˜ì¡´ì„± ì œê±° |

ì´ êµ¬ì¡°ëŠ” **ì¼ì¼ 100ë§Œ ê±´ ì´ìƒì˜ ë°ì´í„° ì²˜ë¦¬**ë¡œ í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

---

## í•œê³„ì  ë° í–¥í›„ ê³„íš (Limitations & Future Work)

| í•­ëª© | í˜„ì¬ ìƒíƒœ | í•´ê²° ë°©ì•ˆ |
|------|----------|----------|
| **LLM Inference** | ë¡œì»¬ Ollama ì‚¬ìš© (GPU í•„ìš”) | í”„ë¡œë•ì…˜ ì‹œ OpenAI API ë˜ëŠ” Vertex AI ì „í™˜ |
| **ì‹¤ì‹œê°„ ì²˜ë¦¬** | ì‹œê°„ ë‹¨ìœ„ ë°°ì¹˜ ìˆ˜ì§‘ | Pub/Sub + Dataflowë¡œ ìŠ¤íŠ¸ë¦¬ë° ì „í™˜ ê°€ëŠ¥ |
| **ë¹„ìš©** | GCP ë¬´ë£Œ Tier ìµœì í™” | íŠ¸ë˜í”½ ì¦ê°€ ì‹œ Cloud Run ì˜¤í† ìŠ¤ì¼€ì¼ë§ ì„¤ì • |
| **ëª¨ë‹ˆí„°ë§** | Cloud Logging ìˆ˜ë™ í™•ì¸ | Grafana + Prometheus ëŒ€ì‹œë³´ë“œ êµ¬ì¶• ì˜ˆì • |

---

## ê°œë°œ ê³¼ì •ì—ì„œì˜ ë¬¸ì œ í•´ê²° (Troubleshooting & Lessons Learned)

### 1. Transform ë ˆì´ì–´ ì¤‘ë³µ í‚¤ ì—ëŸ¬

**ë¬¸ì œ**: `fact_comments` í…Œì´ë¸”ì— ë™ì¼ ëŒ“ê¸€ì´ ë‹¤ë¥¸ ì‹œê°„ì— ìˆ˜ì§‘ë  ë•Œ `duplicate key value violates unique constraint` ì—ëŸ¬ ë°œìƒ

**ì›ì¸**: ê¸°ë³¸í‚¤ê°€ `comment_id` ë‹¨ë…ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆì–´, íŠ¸ë Œë“œ ì¶”ì ì„ ìœ„í•œ ì‹œì ë³„ ë°ì´í„° ì €ì¥ ë¶ˆê°€

**í•´ê²°**:
```sql
ALTER TABLE fact_comments DROP CONSTRAINT fact_comments_pkey;
ALTER TABLE fact_comments ADD PRIMARY KEY (comment_id, collected_at);
```

**êµí›ˆ**: íŠ¸ë Œë“œ ë¶„ì„ì´ ëª©ì ì¸ í…Œì´ë¸”ì€ **ì‹œê°„ ì»¬ëŸ¼ì„ ë³µí•©í‚¤**ì— í¬í•¨í•´ì•¼ í•¨

---

### 2. í…Œì´ë¸”/ì»¬ëŸ¼ëª… ë¶ˆì¼ì¹˜ë¡œ ì¸í•œ Cloud Function ì‹¤íŒ¨

**ë¬¸ì œ**: Transform Cloud Functionì´ `etl_processed_files` í…Œì´ë¸”ì„ ì°¾ì§€ ëª»í•´ 205ê±´ì˜ ë°ì´í„° ì²˜ë¦¬ ì‹¤íŒ¨

**ì›ì¸**: ì½”ë“œì—ì„œ ì‚¬ìš©í•œ í…Œì´ë¸”ëª…(`etl_processed_files`)ê³¼ ì‹¤ì œ Supabase í…Œì´ë¸”ëª…(`processed_files`)ì´ ë¶ˆì¼ì¹˜

**í•´ê²°**:
```python
# Before
client.table("etl_processed_files").select("blob_path")...

# After
client.table("processed_files").select("file_path")...
```

**êµí›ˆ**: ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì‹œ **ëª¨ë“  ì°¸ì¡° ì½”ë“œë¥¼ ë™ê¸°í™”**í•´ì•¼ í•˜ë©°, CI/CDì— ìŠ¤í‚¤ë§ˆ ê²€ì¦ ë‹¨ê³„ ì¶”ê°€ í•„ìš”

---

### 3. ë¡œì»¬ í™˜ê²½ì—ì„œ GCS ì ‘ê·¼ ì‹¤íŒ¨ (404 Project Not Found)

**ë¬¸ì œ**: `trigger_missing.py` ì‹¤í–‰ ì‹œ `The requested project was not found` ì—ëŸ¬

**ì›ì¸**: Python `google-cloud-storage` ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ Application Default Credentialsë¥¼ ì°¾ì§€ ëª»í•¨

**í•´ê²°**:
```bash
# ADC ì„¤ì •
gcloud auth application-default login

# ìŠ¤í¬ë¦½íŠ¸ì—ì„œ í”„ë¡œì íŠ¸ ID ëª…ì‹œ
storage_client = storage.Client(project="deproject-482905")
```

**êµí›ˆ**: ë¡œì»¬ ê°œë°œ í™˜ê²½ê³¼ Cloud í™˜ê²½ì˜ **ì¸ì¦ ë°©ì‹ ì°¨ì´**ë¥¼ ì´í•´í•˜ê³ , ìŠ¤í¬ë¦½íŠ¸ì— fallback ë¡œì§ êµ¬í˜„

---

### 4. ì‹¤íŒ¨ ë°ì´í„° ì¬ì²˜ë¦¬ ìë™í™”

**ë¬¸ì œ**: ì—ëŸ¬ê°€ ë°œìƒí•œ íŒŒì¼ë“¤ì„ ìˆ˜ë™ìœ¼ë¡œ ì°¾ì•„ì„œ ì¬ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€

**í•´ê²°**: `trigger_missing.py` ìŠ¤í¬ë¦½íŠ¸ ê°œë°œ
- Supabase `processed_files`ì™€ GCS íŒŒì¼ ëª©ë¡ ë¹„êµ
- ëˆ„ë½ëœ íŒŒì¼ë§Œ ìë™ íƒì§€
- GCS `blob.rewrite(blob)`ë¡œ Cloud Function íŠ¸ë¦¬ê±° ì¬ë°œìƒ

```python
# GCSì— ìˆì§€ë§Œ Supabaseì— ê¸°ë¡ ì—†ëŠ” íŒŒì¼ íƒì§€
if blob.name not in processed_paths:
    blob.rewrite(blob)  # Cloud Function íŠ¸ë¦¬ê±°
```

**êµí›ˆ**: **ë©±ë“±ì„±(Idempotency)**ê³¼ **ì¬ì²˜ë¦¬ ê°€ëŠ¥ì„±**ì„ ê³ ë ¤í•œ íŒŒì´í”„ë¼ì¸ ì„¤ê³„ í•„ìˆ˜

---

### 5. Transform ë ˆì´ì–´ ëª¨ë“ˆí™”

**Before**: ë‹¨ì¼ `main.py`ì— ëª¨ë“  ë³€í™˜ ë¡œì§ (400ì¤„+)

**After**: 
```
transform/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ utils.py      # ê²½ë¡œ íŒŒì‹±, ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â””â”€â”€ database.py   # DB ì‘ì—… (insert, upsert)
â”‚   â””â”€â”€ transformers/
â”‚       â”œâ”€â”€ videos.py     # ì˜ìƒ ë³€í™˜
â”‚       â”œâ”€â”€ comments.py   # ëŒ“ê¸€ ë³€í™˜
â”‚       â”œâ”€â”€ channels.py   # ì±„ë„ ë³€í™˜
â”‚       â””â”€â”€ categories.py # ì¹´í…Œê³ ë¦¬ ë³€í™˜
â””â”€â”€ main.py               # Cloud Function ì§„ì…ì 
```

**êµí›ˆ**: ë°ì´í„° ìœ í˜•ë³„ë¡œ **ì±…ì„ ë¶„ë¦¬**í•˜ë©´ í…ŒìŠ¤íŠ¸, ë””ë²„ê¹…, í™•ì¥ì´ ìš©ì´í•´ì§

---
